apiVersion: v1
kind: Pod
metadata:
  labels:
    test: liveness
  name: liveness-exec
spec:
  containers:
  - name: liveness
    image: docker.io/jagadesh1982/testing-service:3
    ports:
     - containerPort: 9876
    env:
      - name: VERSION
        value: "1.0"
      - name: FRUIT
        value: "mango"
      - name: SLEEP
        value: "50"   
    livenessProbe:
      exec:
        command:
        - cat
        - /tmp/test.txt
      initialDelaySeconds: 5
      periodSeconds: 5


# Many applications running for long periods of time eventually transition to broken states, and cannot recover except by being restarted. 
# Kubernetes provides liveness probes to detect and remedy such situations. # The periodSeconds field specifies that the kubelet should perform 
# a liveness probe every 5 seconds. The initialDelaySeconds field tells the kubelet that it should wait 5 seconds before performing the first probe. 

# To perform a probe, the kubelet executes the command cat /tmp/healthy in the target container. If the command succeeds, it returns 0, and the kubelet 
# considers the container to be alive and healthy. If the command returns a non-zero value, the kubelet kills the container and restarts it.
